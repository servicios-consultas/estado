<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Consulta de infracciones | Buenos Aires</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">

<style>
.container-border {
  border: 1px solid #e0e0e0;
  border-radius: 8px;
}
</style>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom">
  <div class="container">
    <a class="navbar-brand" href="https://www.buenosaires.gob.ar/">
      <img src="./assets/img/logoBA.svg" alt="Ciudad de Buenos Aires" height="40">
    </a>
  </div>
</nav>

<main>

<header class="bg-light pt-4 pb-5 mb-5">
  <div class="container">
    <h1>Consulta de infracciones de tránsito y scoring</h1>
    <p class="lead">Accedé a la información pendiente de pago en la Ciudad de Buenos Aires.</p>
  </div>
</header>

<section class="container pb-5">
  <div class="row">
    <div class="col-lg-8">

      <!-- FORMULARIO -->
      <form onsubmit="event.preventDefault(); consultar();">
        <div class="card p-4 mb-4">
          <h3>Quiero datos sobre</h3>

          <div class="custom-control custom-radio">
            <input type="radio" class="custom-control-input" id="radioDoc" name="tipo" checked>
            <label class="custom-control-label" for="radioDoc">Un documento</label>
          </div>

          <div class="custom-control custom-radio">
            <input type="radio" class="custom-control-input" id="radioDom" name="tipo">
            <label class="custom-control-label" for="radioDom">Una patente</label>
          </div>

          <div class="mt-3">
            <input type="text" id="inputDato" class="form-control"
              placeholder="Ingresá DNI o Patente">
          </div>
        </div>

        <div class="text-right">
          <button class="btn btn-primary btn-lg">Consultar</button>
        </div>
      </form>

      <!-- DATOS INGRESADOS -->
      <div id="datosIngresados" class="pt-4 d-none">
        <div class="card container-border p-4 mb-4">
          <div class="d-flex justify-content-between">
            <h3 class="m-0">Datos ingresados</h3>
            <button class="btn btn-link btn-sm" onclick="location.reload()">Nueva consulta</button>
          </div>

          <hr>

          <small>Opción seleccionada</small>
          <h6 id="tipoConsultaTexto"></h6>

          <hr>

          <small id="labelNumero"></small>
          <h6 id="numeroConsultado"></h6>
        </div>
      </div>

      <!-- SIN INFRACCIONES -->
      <div id="sinInfracciones" class="card container-border p-4 mb-4 d-none">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h6>No registrás infracciones.</h6>
            <form action="libreDeuda.php" method="post" target="_blank">
              <input type="hidden" name="libre_deuda" value="1">
              <button class="btn btn-success mt-2">Descargar libre deuda</button>
            </form>
          </div>
          <span class="material-icons-round bg-success text-white rounded-circle p-2">
            check_circle
          </span>
        </div>
      </div>

      <!-- CON INFRACCIONES / ERROR -->
      <div id="conInfracciones" class="alert alert-danger d-none"></div>

    </div>
  </div>
</section>

</main>

<footer class="bg-light py-4 text-center">
  <small>Buenos Aires Ciudad</small>
</footer>

<script>
/* BASE SIMULADA */
const personas = [
  { dni: "12345678", dominio: "HDF310", sinInfracciones: true },
  { dni: "87654321", dominio: "ABC123", sinInfracciones: false }
];

function consultar() {
  const input = document.getElementById("inputDato").value.trim().toUpperCase();
  if (!input) return;

  const esDNI = /^\d+$/.test(input);

  const datos = document.getElementById("datosIngresados");
  const tipo = document.getElementById("tipoConsultaTexto");
  const numero = document.getElementById("numeroConsultado");
  const label = document.getElementById("labelNumero");
  const sin = document.getElementById("sinInfracciones");
  const con = document.getElementById("conInfracciones");

  datos.classList.add("d-none");
  sin.classList.add("d-none");
  con.classList.add("d-none");

  const persona = personas.find(p => p.dni === input || p.dominio === input);

  if (!persona) {
    con.textContent = "No se encontraron registros para el dato ingresado.";
    con.classList.remove("d-none");
    return;
  }

  datos.classList.remove("d-none");

  if (esDNI) {
    tipo.textContent = "Documento (DNI)";
    label.textContent = "Número de documento";
    numero.textContent = persona.dni;
  } else {
    tipo.textContent = "Patente";
    label.textContent = "Número de patente";
    numero.textContent = persona.dominio;
  }

  if (persona.sinInfracciones) {
    sin.classList.remove("d-none");
  } else {
    con.textContent = "Registrás infracciones pendientes.";
    con.classList.remove("d-none");
  }
}
</script>

</body>
</html>
